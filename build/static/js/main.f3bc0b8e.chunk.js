(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(1),u=t(17),r=t.n(u),a=t(18),i=t(3),s=function(e){var n=e.contact,t=e.deleteHandler;return Object(c.jsxs)("p",{children:[" ",n.name," : ",n.number," ",Object(c.jsx)("button",{onClick:t,children:"Delete"})]})},f=function(e){var n=e.change,t=e.search;return Object(c.jsx)("div",{children:Object(c.jsx)("form",{onSubmit:t,children:Object(c.jsxs)("div",{children:["filter form with ",Object(c.jsx)("input",{onChange:n})]})})})},d=function(e){var n=e.add,t=e.nameChange,o=e.numberChange;return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{onChange:t})]}),Object(c.jsxs)("div",{children:["phone number: ",Object(c.jsx)("input",{onChange:o})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})})},l=t(5),j=t.n(l),m="/api/persons",b=function(){return j.a.get(m).then((function(e){return e.data}))},h=function(e){return j.a.post(m,e).then((function(e){return e.data}))},O=function(e,n){return j.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){var n=j.a.delete("".concat(m,"/").concat(e));return n.then((function(e){console.log(e)})),n.then((function(e){return e.data}))},v=function(e){var n=e.message,t=e.nature,o="error";return null===n?null:("sucess"===t&&(o="sucess"),Object(c.jsx)("div",{className:o,children:n}))},x=(t(16),function(){var e=Object(o.useState)([]),n=Object(i.a)(e,2),t=n[0],u=n[1],r=Object(o.useState)(""),l=Object(i.a)(r,2),j=l[0],m=l[1],x=Object(o.useState)(""),g=Object(i.a)(x,2),w=g[0],y=g[1],C=Object(o.useState)(""),S=Object(i.a)(C,2),T=S[0],k=S[1],D=Object(o.useState)(null),E=Object(i.a)(D,2),H=E[0],J=E[1],M=Object(o.useState)(""),N=Object(i.a)(M,2),R=N[0],U=N[1],A=T?t.filter((function(e){return e.name.toUpperCase().includes(T.toUpperCase())})):Object(a.a)(t);Object(o.useEffect)((function(){b().then((function(e){u(e),J(null)})).catch((function(e){J(e.response.data.message),U("error"),setTimeout((function(){J(null)}),5e3)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(v,{message:H,nature:R}),Object(c.jsx)(f,{change:function(e){k(e.target.value)}}),Object(c.jsx)("h3",{children:"add a new "}),Object(c.jsx)(d,{add:function(e){e.preventDefault();var n={name:j,number:w};if(t.map((function(e){return e.name})).includes(j)){if(window.confirm("Do you really want to modify ".concat(j,"?"))){var c=t.find((function(e){return e.name===j}));O(c.id,n).then((function(e){var n=t.filter((function(e){return e.name!==j}));u(n.concat(e)),U("sucess"),J("Modified ".concat(e.name)),setTimeout((function(){J(null)}),5e3)})).catch((function(e){J(e.response.data.message),U("error"),setTimeout((function(){J(null)}),5e3)}))}}else if(t.map((function(e){return e.number})).includes(w)){if(window.confirm("Do you really want to modify ".concat(j,"?"))){var o=t.find((function(e){return e.number===w}));O(o.id,n).then((function(e){var n=t.filter((function(e){return e.number!==w}));u(n.concat(e)),U("sucess"),J("Modified ".concat(e.name)),setTimeout((function(){J(null)}),5e3)})).catch((function(e){J(e.response.data.message),U("error"),setTimeout((function(){J(null)}),5e3)}))}}else h(n).then((function(e){u(t.concat(e)),U("sucess"),J("Added ".concat(e.name)),setTimeout((function(){J(null)}),5e3)})).catch((function(e){J(e.response.data.message),U("error"),setTimeout((function(){J(null)}),5e3)}))},nameChange:function(e){m(e.target.value)},numberChange:function(e){y(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),A.map((function(e){return Object(c.jsx)(s,{contact:e,deleteHandler:function(){return function(e){var n=t.find((function(n){return n.name===e}));window.confirm("Do you really want to delete ".concat(e,"?"))&&p(n.id).then((function(e){console.log("contactRemoved: ",e),u(t.filter((function(e){return e.id!==n.id}))),J("Removed ".concat(e.name)),U("sucess"),setTimeout((function(){J(null)}),5e3)}))}(e.name)}},e.name)}))]})});r.a.render(Object(c.jsx)(x,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.f3bc0b8e.chunk.js.map